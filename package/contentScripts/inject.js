/*! For license information please see inject.js.LICENSE.txt */
(()=>{var t={487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},12:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)8*r+6*s<=8*t.length?n.push(e.charAt(o>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}},t.exports=n},738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},296:(t,e,n)=>{var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,a=parseInt,i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,f=i||u||Function("return this")(),d=Object.prototype.toString,_=Math.max,l=Math.min,m=function(){return f.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==d.call(t)}(t))return NaN;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=s.test(t);return n||c.test(t)?a(t.slice(2),n?2:8):o.test(t)?NaN:+t}t.exports=function(t,e,n){var r,o,s,c,a,i,u=0,f=!1,d=!1,k=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,s=o;return r=o=void 0,u=e,c=t.apply(s,n)}function h(t){return u=t,a=setTimeout(b,e),f?p(t):c}function v(t){var n=t-i;return void 0===i||n>=e||n<0||d&&t-u>=s}function b(){var t=m();if(v(t))return x(t);a=setTimeout(b,function(t){var n=e-(t-i);return d?l(n,s-(t-u)):n}(t))}function x(t){return a=void 0,k&&r?p(t):(r=o=void 0,c)}function T(){var t=m(),n=v(t);if(r=arguments,o=this,i=t,n){if(void 0===a)return h(i);if(d)return a=setTimeout(b,e),p(i)}return void 0===a&&(a=setTimeout(b,e)),c}return e=g(e)||0,y(n)&&(f=!!n.leading,s=(d="maxWait"in n)?_(g(n.maxWait)||0,e):s,k="trailing"in n?!!n.trailing:k),T.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=i=o=a=void 0},T.flush=function(){return void 0===a?c:x(m())},T}},568:(t,e,n)=>{var r,o,s,c,a;r=n(12),o=n(487).utf8,s=n(738),c=n(487).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?c.stringToBytes(t):o.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=r.bytesToWords(t),i=8*t.length,u=1732584193,f=-271733879,d=-1732584194,_=271733878,l=0;l<n.length;l++)n[l]=16711935&(n[l]<<8|n[l]>>>24)|4278255360&(n[l]<<24|n[l]>>>8);n[i>>>5]|=128<<i%32,n[14+(i+64>>>9<<4)]=i;var m=a._ff,y=a._gg,g=a._hh,k=a._ii;for(l=0;l<n.length;l+=16){var p=u,h=f,v=d,b=_;u=m(u,f,d,_,n[l+0],7,-680876936),_=m(_,u,f,d,n[l+1],12,-389564586),d=m(d,_,u,f,n[l+2],17,606105819),f=m(f,d,_,u,n[l+3],22,-1044525330),u=m(u,f,d,_,n[l+4],7,-176418897),_=m(_,u,f,d,n[l+5],12,1200080426),d=m(d,_,u,f,n[l+6],17,-1473231341),f=m(f,d,_,u,n[l+7],22,-45705983),u=m(u,f,d,_,n[l+8],7,1770035416),_=m(_,u,f,d,n[l+9],12,-1958414417),d=m(d,_,u,f,n[l+10],17,-42063),f=m(f,d,_,u,n[l+11],22,-1990404162),u=m(u,f,d,_,n[l+12],7,1804603682),_=m(_,u,f,d,n[l+13],12,-40341101),d=m(d,_,u,f,n[l+14],17,-1502002290),u=y(u,f=m(f,d,_,u,n[l+15],22,1236535329),d,_,n[l+1],5,-165796510),_=y(_,u,f,d,n[l+6],9,-1069501632),d=y(d,_,u,f,n[l+11],14,643717713),f=y(f,d,_,u,n[l+0],20,-373897302),u=y(u,f,d,_,n[l+5],5,-701558691),_=y(_,u,f,d,n[l+10],9,38016083),d=y(d,_,u,f,n[l+15],14,-660478335),f=y(f,d,_,u,n[l+4],20,-405537848),u=y(u,f,d,_,n[l+9],5,568446438),_=y(_,u,f,d,n[l+14],9,-1019803690),d=y(d,_,u,f,n[l+3],14,-187363961),f=y(f,d,_,u,n[l+8],20,1163531501),u=y(u,f,d,_,n[l+13],5,-1444681467),_=y(_,u,f,d,n[l+2],9,-51403784),d=y(d,_,u,f,n[l+7],14,1735328473),u=g(u,f=y(f,d,_,u,n[l+12],20,-1926607734),d,_,n[l+5],4,-378558),_=g(_,u,f,d,n[l+8],11,-2022574463),d=g(d,_,u,f,n[l+11],16,1839030562),f=g(f,d,_,u,n[l+14],23,-35309556),u=g(u,f,d,_,n[l+1],4,-1530992060),_=g(_,u,f,d,n[l+4],11,1272893353),d=g(d,_,u,f,n[l+7],16,-155497632),f=g(f,d,_,u,n[l+10],23,-1094730640),u=g(u,f,d,_,n[l+13],4,681279174),_=g(_,u,f,d,n[l+0],11,-358537222),d=g(d,_,u,f,n[l+3],16,-722521979),f=g(f,d,_,u,n[l+6],23,76029189),u=g(u,f,d,_,n[l+9],4,-640364487),_=g(_,u,f,d,n[l+12],11,-421815835),d=g(d,_,u,f,n[l+15],16,530742520),u=k(u,f=g(f,d,_,u,n[l+2],23,-995338651),d,_,n[l+0],6,-198630844),_=k(_,u,f,d,n[l+7],10,1126891415),d=k(d,_,u,f,n[l+14],15,-1416354905),f=k(f,d,_,u,n[l+5],21,-57434055),u=k(u,f,d,_,n[l+12],6,1700485571),_=k(_,u,f,d,n[l+3],10,-1894986606),d=k(d,_,u,f,n[l+10],15,-1051523),f=k(f,d,_,u,n[l+1],21,-2054922799),u=k(u,f,d,_,n[l+8],6,1873313359),_=k(_,u,f,d,n[l+15],10,-30611744),d=k(d,_,u,f,n[l+6],15,-1560198380),f=k(f,d,_,u,n[l+13],21,1309151649),u=k(u,f,d,_,n[l+4],6,-145523070),_=k(_,u,f,d,n[l+11],10,-1120210379),d=k(d,_,u,f,n[l+2],15,718787259),f=k(f,d,_,u,n[l+9],21,-343485551),u=u+p>>>0,f=f+h>>>0,d=d+v>>>0,_=_+b>>>0}return r.endian([u,f,d,_])})._ff=function(t,e,n,r,o,s,c){var a=t+(e&n|~e&r)+(o>>>0)+c;return(a<<s|a>>>32-s)+e},a._gg=function(t,e,n,r,o,s,c){var a=t+(e&r|n&~r)+(o>>>0)+c;return(a<<s|a>>>32-s)+e},a._hh=function(t,e,n,r,o,s,c){var a=t+(e^n^r)+(o>>>0)+c;return(a<<s|a>>>32-s)+e},a._ii=function(t,e,n,r,o,s,c){var a=t+(n^(e|~r))+(o>>>0)+c;return(a<<s|a>>>32-s)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?c.bytesToString(n):r.bytesToHex(n)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=n(296),e=n.n(t);const r=console.log.bind(console);var o=n(568),s=n.n(o);const c="tracks";async function a(t){return new Promise((e=>{chrome.storage.sync.get([c],((n={})=>{const r=(n.tracks||{})[t]||{};e(r)}))}))}async function i(t,e){return new Promise((n=>{chrome.storage.sync.get([c],((r={})=>{const o=r.tracks||{};o[t]=e;const s={[c]:o};chrome.storage.sync.set(s,n)}))}))}function u(t){return t.currentTarget.closest(".__sctmext__task")}async function f(t){const e=t.dataset.__sctmext__trackId;return{trackId:e,taskId:t.dataset.__sctmext__taskId,trackData:await a(e)}}async function d(t){t.preventDefault();const e=u(t);if(!e)return;const{trackId:n,taskId:o,trackData:s}=await f(e),c=Boolean(s.focused?.[o]);r(">> handleClickFocus",{taskId:o,trackId:n,wasFocused:c}),document.querySelectorAll(".__sctmext__task_focused").forEach((t=>{t.classList.remove("__sctmext__task_focused")})),c?delete s.focused?.[o]:(e.classList.add("__sctmext__task_focused"),s.focused={[o]:Date.now()}),await i(n,s)}async function _(t){t.preventDefault();const e=u(t);if(!e)return;const{trackId:n,taskId:o,trackData:s}=await f(e),c=Boolean(s.ignored?.[o]);r(">> handleClickIgnore",{taskId:o,trackId:n,wasIgnored:c}),c?(e.classList.remove("__sctmext__task_ignored"),delete s.ignored?.[o]):(e.classList.add("__sctmext__task_ignored"),s.ignored=s.ignored||{},s.ignored[o]=Date.now()),await i(n,s)}async function l(t){t.preventDefault();const e=u(t);if(!e)return;const{trackId:n,taskId:o,trackData:s}=await f(e),c=Boolean(s.done?.[o]);r(">> handleClickDone",{taskId:o,trackId:n,wasDone:c}),c?(e.classList.remove("__sctmext__task_done"),delete s.done?.[o]):(e.classList.add("__sctmext__task_done"),s.done=s.done||{},s.done[o]=Date.now()),await i(n,s)}const m={};new MutationObserver(e()((async function(){const t=document.querySelectorAll(".commentsList__item:not(.__sctmext__task)");(async function(t){if(!t?.length)return;const e=document.location.pathname,n=await a(e);t.forEach((t=>function(t,{trackId:e,trackData:n={}}){const o=t.querySelector(".commentItem__usernameLink")?.innerText||"",c=t.querySelector(".commentItem__timestampLink")?.innerText||"",a=t.querySelector(".commentItem__body p")?.innerText;if(!a)return void r(">> initTask: empty commentText",t);const i=(({userName:t,timeLink:e,commentText:n})=>s()([t,e,n].join("|")))({userName:o,timeLink:c,commentText:a});if(m[e]?.[i])return;m[e]=m[e]||{},m[e][i]=!0,r(">> initTask",{trackId:e,taskId:i,userName:o,timeLink:c,commentText:a,node:t}),t.classList.add("__sctmext__task"),t.dataset.__sctmext__trackId=e,t.dataset.__sctmext__taskId=i,t.querySelector(".commentItem__body")?.addEventListener("click",l);const u=document.createElement("button");u.classList.add("sc-button","sc-button-secondary","sc-button-responsive","sc-button-small","__sctmext__task__button","__sctmext__task__button_ignore"),u.textContent="Ignore",u.onclick=_,t.querySelector(".commentItem__controls")?.prepend(u);const f=document.createElement("button");f.classList.add("sc-button","sc-button-secondary","sc-button-responsive","sc-button-small","__sctmext__task__button","__sctmext__task__button_focus"),f.textContent="Focus",f.onclick=d,t.querySelector(".commentItem__controls")?.prepend(f);const{done:y={},focused:g={},ignored:k={}}=n;y[i]&&t.classList.add("__sctmext__task_done"),g[i]&&t.classList.add("__sctmext__task_focused"),k[i]&&t.classList.add("__sctmext__task_ignored")}(t,{trackId:e,trackData:n})))})(t).then((()=>r(">> initTrackTasks:done")));const e=document.querySelectorAll(".trackManagerTrackList__item:not(.__sctmext__trackItem)");(async function(t){t?.length&&t.forEach((t=>function(t){t.classList.add("__sctmext__track");const e=t.querySelector("a.soundTitle__title").href;e&&r(">> initTrackListItem",{nodeTrackId:e})}(t)))})(e).then((()=>r(">> initTracksList:done"))),r(">> handleMutation",{trackTasksNodes:t,trackListNodes:e})}),200)).observe(document.body,{childList:!0,subtree:!0})})()})();